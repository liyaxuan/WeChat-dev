{"version":3,"sources":["admin.es6.js"],"names":[],"mappings":"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","file":"admin.js","sourcesContent":["import { mongo, mongoErrHandler } from './mongo.js';\r\n\r\nlet teacher = {\r\n\tgetAll: (req, res) => {\r\n\t\tmongo({\r\n\t\t\tcol: 'teacher',\r\n\t\t\tmethod: 'find'\r\n\t\t}).then((array) => {\r\n\t\t\tres.json({ result: 'success', data: array });\r\n\t\t}, mongoErrHandler(res));\r\n\t},\r\n\tgetOne: (req, res) => {\r\n\t\tlet tid = req.query.tid;\r\n\t\tmongo({\r\n\t\t\tcol: 'teacher',\r\n\t\t\tmethod: 'find',\r\n\t\t\tqueryData: { tid: tid }\r\n\t\t}).then((array) => {\r\n\t\t\tres.json({ result: 'success', data: array[0] });\r\n\t\t}, mongoErrHandler(res));\t\t\r\n\t},\r\n\tpostOne: (req, res) => {\r\n\t\tconsole.log(req.body);\r\n\t\tlet tid = req.body.tid;\r\n\t\tlet pwd = req.body.pwd;\r\n\t\tlet name = req.body.name;\r\n\t\tlet phone = req.body.phone;\r\n\r\n\t\tmongo({\r\n\t\t\tcol: 'teacher',\r\n\t\t\tmethod: 'find',\r\n\t\t\tqueryData: { tid: tid }\r\n\t\t}).then((array) => {\r\n\t\t\tif(array.length == 0)\r\n\t\t\t\treturn mongo({\r\n\t\t\t\t\tcol: 'teacher',\r\n\t\t\t\t\tmethod: 'insert',\r\n\t\t\t\t\tupdateData: { tid: tid, pwd: pwd, name: name, phone: phone }\r\n\t\t\t\t});\r\n\t\t\telse\r\n\t\t\t\tres.json({ result: 'fail', code: 'E02' });\r\n\t\t}, mongoErrHandler(res)).then((doc) => {\r\n\t\t\tlet result = doc.result;\r\n\t\t\tconsole.log(result);\r\n\t\t\tif(result.n >= 1)\r\n\t\t\t\tres.json({ result: 'success' });\r\n\t\t\teles\r\n\t\t\t\tres.json({ result: 'fail', code: result });\r\n\t\t}, mongoErrHandler(res));\r\n\t},\r\n\tputOne: (req, res) => {\r\n\t\tconsole.log(req.body);\r\n\t\tlet tid = req.body.tid;\r\n\t\tlet pwd = req.body.pwd;\r\n\t\tlet name = req.body.name;\r\n\t\tlet phone = req.body.phone;\r\n\r\n\t\tmongo({\r\n\t\t\tcol: 'teacher',\r\n\t\t\tmethod: 'update',\r\n\t\t\tqueryData: { tid: tid },\r\n\t\t\tupdateData: { $set: { pwd: pwd, name: name, phone: phone } }\r\n\t\t}).then((doc) => {\r\n\t\t\tlet result = doc.result;\r\n\t\t\tconsole.log(result);\r\n\t\t\tif(result.n >= 1)\r\n\t\t\t\tres.json({ result: 'success' });\r\n\t\t\telse\r\n\t\t\t\tres.json({ result: 'fail', code: 'E03' });\r\n\t\t}, mongoErrHandler(res));\r\n\t}\r\n};\r\n\r\nexport { teacher };"],"sourceRoot":"/source/"}