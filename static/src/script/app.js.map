{"version":3,"sources":["app.es6.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["import { load } from './preload';\r\n\r\nfunction ajax({method, url, param = {}, data, succ, fail}) {\r\n\tlet resource = Vue.resource(url);\r\n\tif(method == 'save' || method == 'update') {\r\n\t\t// let requestBody = new FormData();\r\n\t\t// for(let attribute in data )\r\n\t\t// \trequestBody.append(attribute, data[attribute]);\r\n\r\n\t\tresource[method](param, data).then(succ, fail);\r\n\t}\r\n\telse\r\n\t\tresource[method](param).then(succ, fail);\t\r\n};\r\n\r\nlet Login = load('src/view/login.html').then((html) => {\r\n\treturn new Promise((resolve) => {\r\n\t\tresolve(Vue.extend({\r\n\t\t\tdata: function () {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tusername: '19290000',\r\n\t\t\t\t\tpassword: '520779',\r\n\t\t\t\t\toption: 'teacher'\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\ttemplate: html,\r\n\t\t\tmethods: {\r\n\t\t\t\tselect: function (identity, event) {\r\n\t\t\t\t\t$('.radio > .btn').removeClass('selected');\r\n\t\t\t\t\t$(event.target).addClass('selected');\r\n\t\t\t\t\tthis.option = identity;\r\n\t\t\t\t},\r\n\t\t\t\tlogin: function () {\r\n\t\t\t\t\tajax({\r\n\t\t\t\t\t\tmethod: 'save',\r\n\t\t\t\t\t\turl: '/login',\r\n\t\t\t\t\t\tparam: { option: this.option },\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tusername: this.username,\r\n\t\t\t\t\t\t\tpassword: this.password\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsucc: (response) => {\r\n\t\t\t\t\t\t\tlet data = response.data;\r\n\t\t\t\t\t\t\tif(data.result == 'success') {\r\n\t\t\t\t\t\t\t\trouter.go({ path: '/home' });\r\n\t\t\t\t\t\t\t\tlocalStorage.setItem('tid', this.tid);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\talert('用户名或密码错误');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (response) => {\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}));\r\n\t});\r\n});\r\n\r\nlet admin = 'src/view/admin';\r\nlet teacher = 'src/view/teacher';\r\n\r\nlet AdminHome = load(`${admin}/home.html`).then((html) => {\r\n\treturn new Promise((resolve) => {\r\n\t\tresolve(Vue.extend({\r\n\t\t\ttemplate: html\r\n\t\t}));\r\n\t});\r\n});\r\n\r\nlet AdminLesson = load(`${admin}/lesson.html`).then((html) => {\r\n\treturn new Promise((resolve) => {\r\n\t\tresolve(Vue.extend({\r\n\t\t\ttemplate: html\r\n\t\t}));\r\n\t});\r\n});\r\n\r\nlet Register = load(`${admin}/register.html`).then((html) => {\r\n\treturn new Promise((resolve) => {\r\n\t\tresolve(Vue.extend({\r\n\t\t\tdata: function () {\r\n\t\t\t\treturn { tid: '1929000', name: 'dsafdas', phone: 'sdafadsf', pwd: 'asdfasdf' };\r\n\t\t\t},\r\n\t\t\ttemplate: html,\r\n\t\t\tmethods: {\r\n\t\t\t\tregister: function () {\r\n\t\t\t\t\tlet _this = this;\r\n\t\t\t\t\tajax({\r\n\t\t\t\t\t\tmethod: 'save',\r\n\t\t\t\t\t\turl: '/register',\r\n\t\t\t\t\t\tdata: { tid: _this.tid, name: _this.name, phone: _this.phone, pwd: _this.pwd },\r\n\t\t\t\t\t\tsucc: (response) => {\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}));\t\t\r\n\t})\r\n});\r\n\r\nlet TeacherHome = load(`${teacher}/home.html`).then((html) => {\r\n\treturn new Promise((resolve) => {\r\n\t\tresolve(Vue.extend({\r\n\t\t\ttemplate: html\r\n\t\t}));\r\n\t});\r\n});\r\n\r\nlet TeacherLesson = load(`${teacher}/lesson.html`).then((html) => {\r\n\treturn new Promise((resolve) => {\r\n\t\tresolve(Vue.extend({\r\n\t\t\tdata: function () {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tlist: [],\r\n\t\t\t\t\tisWarn: false\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\ttemplate: html,\r\n\t\t\tready: function () {\r\n\t\t\t\tlet _this = this;\r\n\r\n\t\t\t\tajax({\r\n\t\t\t\t\tmethod: 'get',\r\n\t\t\t\t\turl: '/lesson',\r\n\t\t\t\t\tparam:  { tid: localStorage.getItem('tid') },\r\n\t\t\t\t\tsucc: function (response) {\r\n\t\t\t\t\t\t/*视图载入后立刻ajax, 如果返回的不是空数组\r\n\t\t\t\t\t\t关闭警告, 赋值model中的list*/\r\n\t\t\t\t\t\tif(response.data.list.length != 0){\r\n\t\t\t\t\t\t\t_this.list = response.data.list;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t_this.isWarn = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function (response) {\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}));\r\n\t});\r\n});\r\n\r\nlet Student = load(`${teacher}/student.html`).then((html) => {\r\n\treturn new Promise((resolve) => {\r\n\t\tresolve(Vue.extend({\r\n\t\t\ttemplate: html\r\n\t\t}));\r\n\t});\r\n});\r\n\r\nlet Teach = load(`${teacher}/teach.html`).then((html) => {\r\n\treturn new Promise((resolve) => {\r\n\t\tresolve(Vue.extend({\r\n\t\t\ttemplate: html\r\n\t\t}));\r\n\t});\r\n});\r\n\r\nPromise.all([Login, AdminHome, AdminLesson, Register,\r\n\tTeacherHome, TeacheerLesson, Student, Teach])\r\n.then(([Login, AdminHome, AdminLesson, Register,\r\n\tTeacherHome, TeacheerLesson, Student, Teach]) => {\r\n\t\tlet App = Vue.extend({});\r\n\r\n\t\tlet router = new VueRouter();\r\n\r\n\t\trouter.map({\r\n\t\t\t'/login': {\r\n\t\t\t\tcomponent: Login\r\n\t\t\t},\r\n\t\t\t'/admin': {\r\n\t\t\t\tcomponent: AdminHome,\r\n\t\t\t\tsubRoutes: {\r\n\t\t\t\t\t'/register': {\r\n\t\t\t\t\t\tcomponent: Register\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'/lesson': {\r\n\t\t\t\t\t\tcomponent: AdminLesson\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'/teacher': {\r\n\t\t\t\t\t\tcomponent: Teacher\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t'/teacher': {\r\n\t\t\t\tcomponent: TeacherHome,\r\n\t\t\t\tsubRoutes: {\r\n\t\t\t\t\t'/lesson': {\r\n\t\t\t\t\t\tcomponent: TeacherLesson\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'/student': {\r\n\t\t\t\t\t\tcomponent: Student\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'/teach': {\r\n\t\t\t\t\t\tcomponent: Teach\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\trouter.start(App, '.app');\r\n});"],"sourceRoot":"/source/"}